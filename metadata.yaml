# yaml-language-server: $schema=https://raw.githubusercontent.com/sgnl-actions/schemas/main/metadata.schema.json
name: slack-send-message
description: Send a message to a Slack channel via API or webhook

# Input parameters for web form generation
inputs:
  text:
    type: text
    description: Message text to send to Slack channel
    required: true
    validation:
      min: 1
      max: 4000

  channel:
    type: text
    description: Slack channel name or ID (required for API mode, ignored for webhook mode)
    required: false
    validation:
      min: 1
      max: 100

  isWebhook:
    type: boolean
    description: Use webhook mode instead of API mode
    required: false
    default: false

  address:
    type: text
    description: Slack API base URL (e.g., https://slack.com)
    required: false
    validation:
      min: 1
      max: 255

# Required secrets (varies by mode)
secrets:
  BEARER_AUTH_TOKEN:
    description: Slack Bot User OAuth Access Token (required for API mode)
    required: false

# Environment variables
environment:
  ADDRESS:
    description: Base URL for Slack API (API mode) or webhook URL (webhook mode)
    default: https://slack.com

# Expected output structure
outputs:
  status:
    type: text
    description: Operation result (success, failed, recovered, etc.)

  text:
    type: text
    description: The message text that was sent

  channel:
    type: text
    description: The channel where the message was sent (API mode only)

  ts:
    type: text
    description: Message timestamp returned by Slack (API mode only)

  ok:
    type: boolean
    description: Whether the Slack API response was successful

  mode:
    type: text
    description: The delivery mode used (webhook or api)